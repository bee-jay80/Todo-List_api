<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Todo List API Documentation</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 2em; background: #f8f9fa; }
        h1, h2, h3 { color: #2c3e50; }
        code, pre { background: #eef; padding: 2px 6px; border-radius: 4px; }
        .endpoint { background: #fff; border: 1px solid #ddd; padding: 1em; margin-bottom: 1em; border-radius: 6px; }
        .payload, .response { background: #f4f4f4; padding: 1em; border-radius: 6px; margin-bottom: 1em; }
        .method { font-weight: bold; color: #2980b9; }
        .section { margin-bottom: 2em; }
    </style>
</head>
<body>
    <h1>Todo List API Documentation</h1>
    <p>
        The Todo List API is a Django REST Framework-based backend for managing tasks (todos) with user authentication. It supports JWT authentication, CRUD operations for todos, and user management.
    </p>

    <div class="section">
        <h2>API Overview</h2>
        <ul>
            <li>Base URL: <code>/api/</code></li>
            <li>Authentication: JWT (Bearer token)</li>
            <li>Database: SQLite (default) or MySQL</li>
        </ul>
    </div>

    <div class="section">
        <h2>Authentication Endpoints</h2>
        <div class="endpoint">
            <span class="method">POST</span> <code>/api/register/</code>
            <p>Register a new user.</p>
            <div class="payload">
                <strong>Payload:</strong>
                <pre>{
  "username": "user1",
  "email": "user1@example.com",
  "password": "yourpassword"
}</pre>
            </div>
            <div class="response">
                <strong>Response:</strong>
                <pre>{
  "id": 1,
  "username": "user1",
  "email": "user1@example.com"
}</pre>
            </div>
        </div>
        <div class="endpoint">
            <span class="method">POST</span> <code>/api/login/</code>
            <p>Authenticate and receive JWT tokens.</p>
            <div class="payload">
                <strong>Payload:</strong>
                <pre>{
  "username": "user1",
  "password": "yourpassword"
}</pre>
            </div>
            <div class="response">
                <strong>Response:</strong>
                <pre>{
  "access": "jwt-access-token",
  "refresh": "jwt-refresh-token"
}</pre>
            </div>
        </div>
        <div class="endpoint">
            <span class="method">POST</span> <code>/api/logout/</code>
            <p>Logout and blacklist the refresh token.</p>
            <div class="response">
                <strong>Response:</strong>
                <pre>{ "message": "Logged out successfully" }</pre>
            </div>
        </div>
        <div class="endpoint">
            <span class="method">POST</span> <code>/api/change-password/</code>
            <p>Change password (authenticated).</p>
            <div class="payload">
                <strong>Payload:</strong>
                <pre>{
  "old_password": "oldpass",
  "new_password": "newpass"
}</pre>
            </div>
            <div class="response">
                <strong>Response:</strong>
                <pre>{ "message": "Password updated successfully" }</pre>
            </div>
        </div>
        <div class="endpoint">
            <span class="method">POST</span> <code>/api/forgot-password/</code>
            <p>Send password reset email.</p>
            <div class="payload">
                <strong>Payload:</strong>
                <pre>{ "email": "user1@example.com" }</pre>
            </div>
            <div class="response">
                <strong>Response:</strong>
                <pre>{ "message": "Password reset email sent" }</pre>
            </div>
        </div>
        <div class="endpoint">
            <span class="method">POST</span> <code>/api/reset-password/</code>
            <p>Reset password using token.</p>
            <div class="payload">
                <strong>Payload:</strong>
                <pre>{
  "new_password": "newpass",
  "token": "reset-token"
}</pre>
            </div>
            <div class="response">
                <strong>Response:</strong>
                <pre>{ "message": "Password reset successful" }</pre>
            </div>
        </div>
    </div>

    <div class="section">
        <h2>Todo Endpoints</h2>
        <div class="endpoint">
            <span class="method">GET</span> <code>/api/todos/</code>
            <p>List all todos for the authenticated user.</p>
        </div>
        <div class="endpoint">
            <span class="method">POST</span> <code>/api/todos/</code>
            <p>Create a new todo.</p>
            <div class="payload">
                <strong>Payload:</strong>
                <pre>{
  "title": "Buy groceries",
  "description": "Milk, Bread, Eggs",
  "completed": false
}</pre>
            </div>
        </div>
        <div class="endpoint">
            <span class="method">GET</span> <code>/api/todos/{id}/</code>
            <p>Retrieve a todo by ID.</p>
        </div>
        <div class="endpoint">
            <span class="method">PUT</span> <code>/api/todos/{id}/</code>
            <p>Update a todo.</p>
            <div class="payload">
                <strong>Payload:</strong>
                <pre>{
  "title": "Buy groceries",
  "description": "Milk, Bread, Eggs, Butter",
  "completed": true
}</pre>
            </div>
        </div>
        <div class="endpoint">
            <span class="method">DELETE</span> <code>/api/todos/{id}/</code>
            <p>Delete a todo.</p>
        </div>
    </div>

    <div class="section">
        <h2>Authorization</h2>
        <ul>
            <li>All protected endpoints require JWT authentication via <code>Authorization: Bearer &lt;token&gt;</code> header.</li>
            <li>Register and login endpoints are public.</li>
            <li>Each user can only access and manage their own todos.</li>
        </ul>
    </div>

    <div class="section">
        <h2>Setup & Usage</h2>
        <ol>
            <li>Clone the repository and install dependencies: <code>pip install -r requirements.txt</code></li>
            <li>Configure database settings in <code>settings.py</code> if needed.</li>
            <li>Run migrations: <code>python manage.py migrate</code></li>
            <li>Create a superuser: <code>python manage.py createsuperuser</code></li>
            <li>Start the server: <code>python manage.py runserver</code></li>
            <li>Access API at <code>http://127.0.0.1:8000/api/</code></li>
        </ol>
    </div>

    <div class="section">
        <h2>Testing & Troubleshooting</h2>
        <ul>
            <li>Run tests: <code>python manage.py test</code></li>
            <li>Common errors: missing fields, authentication failure, integrity errors.</li>
            <li>JWT issues? Check token expiration and settings.</li>
        </ul>
    </div>

    <div class="section">
        <h2>Contributing</h2>
        <ol>
            <li>Fork the repository.</li>
            <li>Create a feature branch.</li>
            <li>Commit and push your changes.</li>
            <li>Open a pull request.</li>
        </ol>
    </div>
</body>
</html>